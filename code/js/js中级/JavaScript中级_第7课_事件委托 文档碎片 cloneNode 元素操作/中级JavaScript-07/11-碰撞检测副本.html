<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			#div1{width: 100px;height: 100px;background: red;position: absolute;}
			#div2{width: 200px;height: 200px;background: yellow;margin: 200px;}
		</style>
	</head>
	<body>
		<div id="div1"></div>
		<div id="div2"></div>
		
		<script>
			var oDiv = document.getElementById('div1');
			var oDiv2 = document.getElementById('div2');
			
			var disX,disY = 0;
			//var disX = disY = 0;
			oDiv.onmousedown = function(e){
				var e = e || window.event;
				
				disX = e.clientX - oDiv.offsetLeft;
				disY = e.clientY - oDiv.offsetTop;
				
				document.onmousemove = function(e){
					oDiv.style.left = e.clientX - disX + 'px';
					oDiv.style.top = e.clientY - disY + 'px';
					
					//小方块
					var L1 = oDiv.offsetLeft;
					var R1 = oDiv.offsetLeft + oDiv.offsetWidth;
					var T1 = oDiv.offsetTop;
					var B1 = oDiv.offsetTop+ oDiv.offsetHeight;
					
					//大方块
					var L2 = oDiv2.offsetLeft;
					var R2 = oDiv2.offsetLeft + oDiv2.offsetWidth;
					var T2 = oDiv2.offsetTop;
					var B2 = oDiv2.offsetTop+ oDiv2.offsetHeight;
					
					if(R1<L2 || L1>R2 || B1<T2 || T1>B2){
						oDiv2.style.background = 'yellow';
					}else{
						oDiv2.style.background = 'blue';
					}
				}
				document.onmouseup = function(){
					document.onmousemove = null;
					document.onmouseup = null;
				}
			}
		</script>
	</body>
</html>
